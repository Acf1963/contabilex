{% extends 'base.html' %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <div style="margin-bottom: 2rem; display: flex; align-items: center; gap: 1rem;">
        <a href="{% url 'plano_contas' %}" class="btn btn-outline" style="padding: 0.5rem;">
            <i class="fas fa-arrow-left"></i>
        </a>
        <h1 style="margin: 0; font-size: 1.75rem;">{{ titulo }}</h1>
    </div>

    <div class="card" style="padding: 2rem;">
        <form method="post">
            {% csrf_token %}
            
            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                <div class="form-group">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">Classe</label>
                    {{ form.classe }}
                    {% if form.classe.errors %}<div style="color: var(--danger-color); font-size: 0.8rem; margin-top: 0.25rem;">{{ form.classe.errors }}</div>{% endif %}
                </div>
                
                <div class="form-group">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">Código da Conta</label>
                    {{ form.codigo }}
                    <small style="color: var(--text-secondary);">Ex: 11.1.1 (Use pontos para subcontas)</small>
                    {% if form.codigo.errors %}<div style="color: var(--danger-color); font-size: 0.8rem; margin-top: 0.25rem;">{{ form.codigo.errors }}</div>{% endif %}
                </div>
            </div>

            <div class="form-group" style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">Descrição</label>
                {{ form.descricao }}
                {% if form.descricao.errors %}<div style="color: var(--danger-color); font-size: 0.8rem; margin-top: 0.25rem;">{{ form.descricao.errors }}</div>{% endif %}
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                <div class="form-group">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">Conta Pai</label>
                    {{ form.conta_pai }}
                    {% if form.conta_pai.errors %}<div style="color: var(--danger-color); font-size: 0.8rem; margin-top: 0.25rem;">{{ form.conta_pai.errors }}</div>{% endif %}
                </div>
                
                <div class="form-group">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">Tipo de Conta</label>
                    {{ form.tipo }}
                    {% if form.tipo.errors %}<div style="color: var(--danger-color); font-size: 0.8rem; margin-top: 0.25rem;">{{ form.tipo.errors }}</div>{% endif %}
                </div>
            </div>

            <div class="form-group" style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">Natureza (Terceiro/Entidade)</label>
                {{ form.tipo_entidade }}
                {% if form.tipo_entidade.errors %}<div style="color: var(--danger-color); font-size: 0.8rem; margin-top: 0.25rem;">{{ form.tipo_entidade.errors }}</div>{% endif %}
            </div>

            <div class="form-group" style="margin-bottom: 2rem; background: rgba(255,255,255,0.02); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer;">
                    {{ form.aceita_lancamentos }}
                    <span style="font-weight: 500;">Esta conta aceita lançamentos contabilísticos?</span>
                </label>
                <p style="margin: 0.5rem 0 0 2rem; font-size: 0.8rem; color: var(--text-secondary);">
                    Contas Razão e Integração normalmente não aceitam lançamentos diretos, servindo apenas para agrupar saldos.
                </p>
                {% if form.aceita_lancamentos.errors %}<div style="color: var(--danger-color); font-size: 0.8rem; margin-top: 0.25rem;">{{ form.aceita_lancamentos.errors }}</div>{% endif %}
            </div>

            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <a href="{% url 'plano_contas' %}" class="btn btn-outline">Cancelar</a>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Gravar Conta
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
